<!DOCTYPE html>
<html lang="en">
<head>
  {% include google-analytics.html %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Tag Plugin -->
  {% seo %}
  
  <!-- Additional Meta Tags -->
  <meta name="author" content="{{ site.author.name }}">
  <meta name="geo.region" content="ZA-NL">
  <meta name="geo.placename" content="Pinetown, KwaZulu-Natal">
  <meta name="geo.position" content="-29.8158;30.8690">
  <meta name="ICBM" content="-29.8158, 30.8690">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:locale" content="en_ZA">
  <meta property="og:type" content="{% if page.url == '/' %}website{% else %}article{% endif %}">
  <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta property="og:description" content="{{ page.description | default: site.description }}">
  <meta property="og:url" content="{{ page.url | replace:'index.html','' | absolute_url }}">
  <meta property="og:image" content="{{ site.url }}/assets/images/gymnast.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta name="twitter:description" content="{{ page.description | default: site.description }}">
  <meta name="twitter:image" content="{{ site.url }}/assets/images/gymnast.png">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{{ '/assets/images/gymnast-small.png' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/assets/images/gymnast-small.png' | relative_url }}">
  
  <!-- Google Fonts preconnect for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">
  
  <!-- RSS Feed -->
  {% feed_meta %}
  
  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Aidan Bevan",
    "jobTitle": "Junior Gymnastics Coach",
    "description": "{{ site.description }}",
    "url": "{{ site.url }}",
    "email": "{{ site.author.email }}",
    "telephone": "{{ site.whatsapp.display }}",
    "image": "{{ site.url }}/assets/images/aidan.jpg",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Pinetown",
      "addressRegion": "KwaZulu-Natal",
      "addressCountry": "ZA"
    },
    "worksFor": {
      "@type": "Organization",
      "name": "Pinetown Gymnastics",
      "url": "https://www.ptngym.co.za/"
    },
    "knowsAbout": [
      "Gymnastics Coaching",
      "Early Childhood Development",
      "Inclusive Gymnastics",
      "Adaptive Sports Training"
    ]
  }
  </script>
</head>
<body>
  {% include header.html %}
  
  <main class="page-content" aria-label="Content">
    {{ content }}
  </main>
  
  {% include footer.html %}

  <!-- Back to Top Button -->
  <button class="back-to-top" id="back-to-top" aria-label="Back to top">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
      <path d="M12 4l-8 8h5v8h6v-8h5z"/>
    </svg>
  </button>
  
  <!-- Certificate Modal -->
  <div id="certificate-modal" class="certificate-modal" aria-hidden="true">
    <div class="certificate-modal-overlay" onclick="closeCertificateModal()"></div>
    <div class="certificate-modal-content">
      <button class="certificate-modal-close" onclick="closeCertificateModal()" aria-label="Close certificate viewer">&times;</button>
      <div class="certificate-viewer">
        <div class="certificate-watermark">COPY</div>
        <img id="certificate-image" src="" alt="Certificate" class="certificate-image">
      </div>
    </div>
  </div>

  <script>
    // ==========================================================================
    // HEADER SCROLL EFFECT
    // ==========================================================================
    var header = document.querySelector('.site-header');
    var lastScroll = 0;

    window.addEventListener('scroll', function() {
      var currentScroll = window.pageYOffset;
      
      if (currentScroll > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      lastScroll = currentScroll;
    });

    // ==========================================================================
    // MOBILE NAVIGATION TOGGLE
    // ==========================================================================
    var navToggle = document.querySelector('.nav-toggle');
    var siteNav = document.querySelector('.site-nav');
    var navOverlay = document.querySelector('.nav-overlay');

    function toggleNav() {
      navToggle.classList.toggle('active');
      siteNav.classList.toggle('active');
      navOverlay.classList.toggle('active');
      document.body.style.overflow = siteNav.classList.contains('active') ? 'hidden' : '';
      navToggle.setAttribute('aria-expanded', siteNav.classList.contains('active'));
    }

    if (navToggle) {
      navToggle.addEventListener('click', toggleNav);
    }

    if (navOverlay) {
      navOverlay.addEventListener('click', toggleNav);
    }

    // Close nav when clicking a link
    var navLinks = document.querySelectorAll('.site-nav a');
    navLinks.forEach(function(link) {
      link.addEventListener('click', function() {
        if (siteNav.classList.contains('active')) {
          toggleNav();
        }
      });
    });

    // ==========================================================================
    // BACK TO TOP BUTTON
    // ==========================================================================
    var backToTop = document.getElementById('back-to-top');

    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 300) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    });

    backToTop.addEventListener('click', function() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // ==========================================================================
    // CERTIFICATE MODAL
    // ==========================================================================
    function openCertificateModal(imageUrl) {
      var modal = document.getElementById('certificate-modal');
      var image = document.getElementById('certificate-image');
      image.src = imageUrl;
      modal.classList.add('active');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    function closeCertificateModal() {
      var modal = document.getElementById('certificate-modal');
      var image = document.getElementById('certificate-image');
      modal.classList.remove('active');
      modal.setAttribute('aria-hidden', 'true');
      image.src = '';
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeCertificateModal();
        // Also close mobile nav if open
        if (siteNav && siteNav.classList.contains('active')) {
          toggleNav();
        }
      }
    });

    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('certificate-link')) {
        e.preventDefault();
        var imageUrl = e.target.getAttribute('href');
        openCertificateModal(imageUrl);
      }
    });

    // ==========================================================================
    // INTERSECTION OBSERVER FOR SCROLL ANIMATIONS
    // ==========================================================================
    var observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in');
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // Observe elements that should animate on scroll
    document.querySelectorAll('.card, .about-section, .testimonial').forEach(function(el) {
      observer.observe(el);
    });
  </script>
</body>
</html>
