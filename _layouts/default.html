<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Tag Plugin -->
  {% seo %}
  
  <!-- Additional Meta Tags -->
  <meta name="author" content="{{ site.author.name }}">
  <meta name="geo.region" content="ZA-NL">
  <meta name="geo.placename" content="Pinetown, KwaZulu-Natal">
  <meta name="geo.position" content="-29.8158;30.8690">
  <meta name="ICBM" content="-29.8158, 30.8690">
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:locale" content="en_ZA">
  <meta property="og:type" content="{% if page.url == '/' %}website{% else %}article{% endif %}">
  <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta property="og:description" content="{{ page.description | default: site.description }}">
  <meta property="og:url" content="{{ page.url | replace:'index.html','' | absolute_url }}">
  <meta property="og:image" content="{{ site.url }}/assets/images/gymnast.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta name="twitter:description" content="{{ page.description | default: site.description }}">
  <meta name="twitter:image" content="{{ site.url }}/assets/images/gymnast.png">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="{{ '/assets/images/gymnast-small.png' | relative_url }}">
  <link rel="apple-touch-icon" href="{{ '/assets/images/gymnast-small.png' | relative_url }}">
  
  <!-- Google Fonts preconnect for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | absolute_url }}">
  
  <!-- RSS Feed -->
  {% feed_meta %}
  
  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Aidan Bevan",
    "jobTitle": "Junior Gymnastics Coach",
    "description": "{{ site.description }}",
    "url": "{{ site.url }}",
    "email": "{{ site.author.email }}",
    "telephone": "{{ site.whatsapp.display }}",
    "image": "{{ site.url }}/assets/images/aidan.jpg",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Pinetown",
      "addressRegion": "KwaZulu-Natal",
      "addressCountry": "ZA"
    },
    "worksFor": {
      "@type": "Organization",
      "name": "Pinetown Gymnastics",
      "url": "https://www.ptngym.co.za/"
    },
    "knowsAbout": [
      "Gymnastics Coaching",
      "Early Childhood Development",
      "Inclusive Gymnastics",
      "Adaptive Sports Training"
    ]
  }
  </script>
</head>
<body>
  {% include header.html %}
  
  <main class="page-content" aria-label="Content">
    {{ content }}
  </main>
  
  {% include footer.html %}
  
  <!-- Certificate Modal -->
  <div id="certificate-modal" class="certificate-modal" aria-hidden="true">
    <div class="certificate-modal-overlay" onclick="closeCertificateModal()"></div>
    <div class="certificate-modal-content">
      <button class="certificate-modal-close" onclick="closeCertificateModal()" aria-label="Close certificate viewer">&times;</button>
      <div class="certificate-viewer">
        <div class="certificate-watermark">COPY</div>
        <iframe id="certificate-iframe" src="" title="Certificate Viewer"></iframe>
      </div>
    </div>
  </div>

  <script>
    function isMobileDevice() {
      return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
             (window.innerWidth <= 768);
    }

    function openCertificateModal(pdfUrl) {
      var modal = document.getElementById('certificate-modal');
      var iframe = document.getElementById('certificate-iframe');
      iframe.src = pdfUrl;
      modal.classList.add('active');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    function closeCertificateModal() {
      var modal = document.getElementById('certificate-modal');
      var iframe = document.getElementById('certificate-iframe');
      modal.classList.remove('active');
      modal.setAttribute('aria-hidden', 'true');
      iframe.src = '';
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeCertificateModal();
      }
    });

    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('certificate-link')) {
        e.preventDefault();
        var pdfUrl = e.target.getAttribute('href');
        if (isMobileDevice()) {
          window.open(pdfUrl, '_blank');
        } else {
          openCertificateModal(pdfUrl);
        }
      }
    });
  </script>
</body>
</html>
